<!DOCTYPE html> <html lang="cn"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> 总线 | Marco's blog </title> <meta name="author" content="Marco Huang"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, blog"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/mc_logo.ico?cf243b61f6c6d75747808b3ae8298c5b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://marco-hmc.github.io/blog/2025/3_%E6%80%BB%E7%BA%BF.md/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Marco's blog </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">总线</h1> <p class="post-meta"> Created on May 06, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/category/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90"> <i class="fa-solid fa-tag fa-sm"></i> 计算机组成</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="总线">总线</h2> <p>计算机中总线概念 ├── 导言 │ ├── 总线的基本概念 │ └── 总线的作用和重要性 ├── 总线的工作原理 │ ├── 总线仲裁（Bus Arbitration） │ ├── 总线周期（Bus Cycle） │ └── 总线传输（Bus Transfer）</p> <p>你提到的“交换机”概念在总线系统中有一定的相似性，但实际上它的工作原理和传统交换机有所不同。我们可以从几个方面来理解这个问题：</p> <h3 id="1-传统总线结构的工作原理">1. <strong>传统总线结构的工作原理</strong> </h3> <p>在传统的总线架构中，CPU、内存和其他设备通过共享的总线连接。总线是由多个信号线（如数据线、地址线和控制线）组成的，这些信号线用于传输不同类型的信息。多个设备通过同一条总线传输数据时，会发生信号冲突或竞争，这样可能导致所谓的“堵塞”问题。</p> <h3 id="2-避免冲突的机制">2. <strong>避免冲突的机制</strong> </h3> <p>为了避免设备之间的数据传输冲突，计算机系统通常采用以下几种机制：</p> <ul> <li> <p><strong>时间分割</strong>（时分复用）：在总线传输中，CPU和其他设备并不是同时发送数据，而是按照某种协议轮流占用总线，这样就避免了多个设备同时传输数据而发生冲突。比如，在经典的 <strong>总线仲裁机制</strong> 中，使用一个仲裁器来决定哪个设备可以使用总线。</p> </li> <li> <p><strong>总线仲裁</strong>：在多设备的系统中，可能会有一个专门的模块来决定哪个设备能够占用总线。常见的总线仲裁方法有轮询式仲裁、优先级仲裁和请求-应答仲裁等。</p> </li> </ul> <h3 id="3-交换式总线">3. <strong>交换式总线</strong> </h3> <p>现代计算机架构中，传统的共享总线被更高效的“交换式总线”所取代。交换式总线类似于交换机的概念，它允许每个设备之间建立独立的通道进行通信，从而避免了资源争用和冲突的问题。</p> <ul> <li> <p><strong>点对点连接</strong>：比如 <strong>PCI Express（PCIe）</strong> 总线采用了点对点连接的方式，设备之间不再共享同一条总线，而是通过多条并行的通道来连接。这些通道是独立的，因此可以并行处理多个数据传输任务，避免了传统总线结构中可能发生的拥堵和冲突。</p> </li> <li> <p><strong>交换式机制</strong>：对于多个设备之间的高效通信，交换式总线可以动态分配带宽和通道，类似于网络中的交换机工作原理，确保每个设备都能高效地与其他设备通信。</p> </li> </ul> <h3 id="4-多层次的总线架构">4. <strong>多层次的总线架构</strong> </h3> <p>在复杂的计算机系统中，可能会有多层次的总线架构来管理不同设备之间的通信。例如，一些系统使用高速的专用总线（如CPU与内存之间的总线）和较低速的共享总线（如输入输出设备和外部设备之间的总线）。不同层次的总线可以在不同的速度下工作，从而避免堵塞和提高整体效率。</p> <h3 id="总结">总结</h3> <p>虽然总线系统并不完全等同于交换机，但在现代系统中，尤其是采用交换式总线的情况下，设备之间的通信就像网络交换机一样，避免了传统总线架构中的拥堵问题。总线的设计目标是通过合理的仲裁、分时复用、甚至引入交换式架构，来保证各个设备的高效通信。</p> <h3 id="计算机中总线概念章节目录">计算机中总线概念章节目录</h3> <h4 id="1-导言">1. 导言</h4> <ul> <li>总线的基本概念</li> <li>总线的作用和重要性</li> </ul> <h4 id="2-总线的基本组成">2. 总线的基本组成</h4> <ul> <li>地址总线（Address Bus）</li> <li>数据总线（Data Bus）</li> <li>控制总线（Control Bus）</li> </ul> <h4 id="3-总线的工作原理">3. 总线的工作原理</h4> <ul> <li>总线仲裁（Bus Arbitration）</li> <li>总线周期（Bus Cycle）</li> <li>总线传输（Bus Transfer）</li> </ul> <h4 id="4-总线的类型">4. 总线的类型</h4> <ul> <li>系统总线（System Bus）</li> <li>I/O 总线（I/O Bus）</li> <li>存储总线（Memory Bus）</li> </ul> <h4 id="5-总线的结构">5. 总线的结构</h4> <ul> <li>单总线结构（Single Bus Architecture）</li> <li>双总线结构（Dual Bus Architecture）</li> <li>多总线结构（Multiple Bus Architecture）</li> </ul> <h4 id="6-总线的性能指标">6. 总线的性能指标</h4> <ul> <li>带宽（Bandwidth）</li> <li>延迟（Latency）</li> <li>吞吐量（Throughput）</li> </ul> <h4 id="7-总线的协议">7. 总线的协议</h4> <ul> <li>PCI 总线（Peripheral Component Interconnect）</li> <li>USB 总线（Universal Serial Bus）</li> <li>SATA 总线（Serial ATA）</li> </ul> <h4 id="8-总线的应用">8. 总线的应用</h4> <ul> <li>总线在计算机系统中的应用</li> <li>总线在嵌入式系统中的应用</li> </ul> <h4 id="9-总线的未来发展">9. 总线的未来发展</h4> <ul> <li>高速总线技术</li> <li>光纤总线技术</li> </ul> <h3 id="计算机中总线概念结构图">计算机中总线概念结构图</h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>计算机中总线概念
├── 导言
│   ├── 总线的基本概念
│   └── 总线的作用和重要性
├── 总线的基本组成
│   ├── 地址总线（Address Bus）
│   ├── 数据总线（Data Bus）
│   └── 控制总线（Control Bus）
├── 总线的工作原理
│   ├── 总线仲裁（Bus Arbitration）
│   ├── 总线周期（Bus Cycle）
│   └── 总线传输（Bus Transfer）
├── 总线的类型
│   ├── 系统总线（System Bus）
│   ├── I/O 总线（I/O Bus）
│   └── 存储总线（Memory Bus）
├── 总线的结构
│   ├── 单总线结构（Single Bus Architecture）
│   ├── 双总线结构（Dual Bus Architecture）
│   └── 多总线结构（Multiple Bus Architecture）
├── 总线的性能指标
│   ├── 带宽（Bandwidth）
│   ├── 延迟（Latency）
│   └── 吞吐量（Throughput）
├── 总线的协议
│   ├── PCI 总线（Peripheral Component Interconnect）
│   ├── USB 总线（Universal Serial Bus）
│   └── SATA 总线（Serial ATA）
├── 总线的应用
│   ├── 总线在计算机系统中的应用
│   └── 总线在嵌入式系统中的应用
├── 总线的未来发展
│   ├── 高速总线技术
│   └── 光纤总线技术
</code></pre></div></div> <h3 id="解释">解释</h3> <ul> <li> <strong>导言</strong>：介绍总线的基本概念及其在计算机系统中的重要性。</li> <li> <strong>总线的基本组成</strong>：详细描述地址总线、数据总线和控制总线的功能和作用。</li> <li> <strong>总线的工作原理</strong>：解释总线仲裁、总线周期和总线传输的工作机制。</li> <li> <strong>总线的类型</strong>：介绍系统总线、I/O 总线和存储总线的不同类型及其应用。</li> <li> <strong>总线的结构</strong>：描述单总线结构、双总线结构和多总线结构的特点和区别。</li> <li> <strong>总线的性能指标</strong>：讨论带宽、延迟和吞吐量等总线性能指标。</li> <li> <strong>总线的协议</strong>：介绍常见的总线协议，如 PCI、USB 和 SATA。</li> <li> <strong>总线的应用</strong>：探讨总线在计算机系统和嵌入式系统中的具体应用。</li> <li> <strong>总线的未来发展</strong>：展望高速总线技术和光纤总线技术的发展前景。</li> </ul> <p>通过这个章节目录和结构图，可以全面了解计算机中总线的概念及其相关的主要知识点和内容。</p> <h3 id="1-导言-1">1. 导言</h3> <ul> <li><strong>总线是什么做什么，有什么用？</strong></li> <li><strong>缓存的组成是怎么样的？</strong></li> <li><strong>缓存的是如何工作的？</strong></li> </ul> <p>本文从上面这些角度出发，希望能够让读者知道总线的作用以及原理。</p> <h3 id="2-总线是什么">2. 总线是什么</h3> <ul> <li> <p><strong><em>总线是什么，有什么用？</em></strong></p> <p>现代计算机是从冯若伊曼计算机发展起来的。其组成部分有存储器、运算器、控制器、输入设备、输出设备，在现代计算机中，人们将运算器与控制器封装起来成为CPU（中央处理单元）。计算机的各种部件想要进行数据交互，就必须让这些部件形成一定的连接关系，以便数据交互的进行。</p> </li> <li> <p><strong><em>不同部件是怎么连接的？</em></strong></p> <blockquote> <p>IO设备，指输入输出等外设。</p> <p>分时：同一时刻只允许一个部件向总线发送信息</p> <p>共享：同一时刻多个部件可以从总线接收相同的信息</p> </blockquote> <p>假设有CPU、存储设备、外设等，他们是可以以全连接的方式连接，但是这种方式未免太过繁琐和复杂。弊端不可一一而说。这时候就有一个很朴素的想法，线路复用，有线路复用的线路就可以叫做总线，因此总线的严格定义是一组能为多个部件分时共享的公共信息传送线路。但本质上就是复用嘛。</p> </li> </ul> <h3 id="3-总线有哪些呢">3. 总线有哪些呢？</h3> <h4 id="31-总线的结构">3.1 总线的结构</h4> <ul> <li> <p><strong>单总线结构</strong></p> <p><img src="img/1669960879103.png" alt="1669960879103"></p> <p>单总线结构将 CPU、主存、I/O 设备（通过I/O接口）都挂在一组总线上，允许I/O 设备之间、I/O设备与主存之间直接交换信息，如图6.1 所示。CPU 与主存、CPU与外设之间可直接进行信息交换，而无须经过中间设备的干预。</p> <ul> <li>注意：单总线并不是指只有一根信号线，系统总线按传送信息的不同可细分为地址总线、数据总线和控制总线。</li> <li>优点∶结构简单，成本低，易于接入新的设备。</li> <li>缺点∶带宽低、负载重，多个部件只能争用唯一的总线，且不支持并发传送操作。</li> </ul> </li> <li> <p><strong>双总线结构</strong></p> <p><img src="img/1669961040111.png" alt="1669961040111"></p> <p>双总线结构有两条总线∶一条是主存总线，用于在 CPU、主存和通道之间传送数据;另一条是 I/O 总线，用于在多个外部设备与通道之间传送数据，如图所示。</p> <ul> <li>优点：将低速 I/O 设备从单总线上分离出来，实现了存储器总线和I/O 总线分离。</li> <li>缺点：需要增加通道等硬件设备。</li> </ul> </li> </ul> <h4 id="32-总线的分类">3.2 总线的分类</h4> <blockquote> <p>同步：指只有一个时钟源。</p> <p>异步：指有多个是时钟源。</p> </blockquote> <ul> <li>按数据传输格式： <ul> <li>串行总线</li> <li>并行总线</li> </ul> </li> <li>按功能（即连接的部件）： <ul> <li>片内总线：它是CPU芯片内部寄存器与寄存器之间、寄存器与ALU之间的公共连接线。</li> <li>系统总线：系统总线是计算机系统内各功能部件（CPU、主存、I/O接口）之间相互连接的总线。 <ul> <li>数据总线</li> <li>地址总线</li> <li>控制总线</li> </ul> </li> <li>通信总线</li> </ul> </li> <li>按时序控制方式： <ul> <li>同步总线</li> <li>异步总线</li> </ul> </li> </ul> <h4 id="33-总线锁">==3.3 总线锁==</h4> <ul> <li>总线锁：在多CPU下，当其中一个处理器要对共享内存进行操作的时候，在总线上发出一个LOCK信号，使得其他处理器无法访问共享数据，开销很大，如果我们能够控制锁的粒度就能减少开销，从而引入了缓存锁。</li> <li>缓存锁：只要保证多个CPU缓存的同一份数据是一致的就可以了，相比总线锁，缓存锁即降低了锁的力度。核心机制是基于缓存一致性协议来实现的。</li> </ul> <h3 id="4-总线的工作原理">4. 总线的工作原理</h3> <ul> <li> <strong>总线传输的四个阶段：</strong> <ol> <li>申请分配阶段：分配下一周期的总线使用权，包括传输请求、总线仲裁。</li> <li>寻址阶段：取得主模块要访问的从模块的地址和命令。</li> <li>传输阶段：主模块和从模块进行数据交换，单向或双向。</li> <li>结束阶段：信息从总线撤除，让出总线使用权。</li> </ol> </li> <li><strong><em>==异步总线，是如何完成传输的？特别是如果一个高频的向一个低频的发起很多数据写任务呢？==</em></strong></li> </ul> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/3_coroutine.md/">coroutine了解</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/2_process.md/">进程</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/2_io.md/">磁盘结构</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/1_threads.md/">c++的多线程</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/0_pointer.md/">指针</a> </li> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Marco Huang. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>